(()=>{var e={};e.id=286,e.ids=[286],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},41506:e=>{"use strict";e.exports=require("@prisma/client/edge")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},53980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(55525),r(11506),r(26083),r(35866);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,55525)),"/Users/gebruiker/Desktop/marktplaats/app/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/Users/gebruiker/Desktop/marktplaats/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"/Users/gebruiker/Desktop/marktplaats/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/gebruiker/Desktop/marktplaats/app/products/page.tsx"],u="/products/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70281:(e,t,r)=>{Promise.resolve().then(r.bind(r,59547)),Promise.resolve().then(r.bind(r,45443))},7394:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(10326),a=r(17577);function i({products:e}){let[t,r]=(0,a.useState)({}),i=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=e=>{switch(e){case"completed":return"Geplaatst";case"processing":return"Bezig...";case"failed":return"Mislukt";default:return"Wachtend"}};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-gray-500 text-lg",children:"Nog geen producten toegevoegd"}),s.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Voeg je eerste product toe om te beginnen"})]}):s.jsx("div",{className:"space-y-4",children:e.map(e=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all p-6 cursor-pointer",onClick:()=>window.location.href=`/products/${e.id}/edit`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[t[e.id]?s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden border border-gray-200 bg-gray-100",children:s.jsx("img",{src:t[e.id],alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})})}):s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-24 h-24 rounded-lg border border-gray-200 bg-gray-100 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start gap-3 mb-3",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 hover:text-indigo-600 transition-colors",children:e.title}),s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${i(e.status)}`,children:n(e.status)})]}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,s.jsxs)("span",{className:"font-medium",children:["#",e.articleNumber]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("span",{className:"font-bold text-indigo-600",children:["€",e.price.toFixed(2)]})]}),e.marktplaatsUrl&&(0,s.jsxs)("a",{href:e.marktplaatsUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors",children:[s.jsx("span",{children:"Bekijk op Marktplaats"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2",children:["failed"===e.status&&(0,s.jsxs)("button",{onClick:async t=>{if(t.stopPropagation(),confirm("Weet je zeker dat je dit product opnieuw wilt proberen te plaatsen?"))try{(await fetch("/api/products/reset-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:[e.id]})})).ok?window.location.reload():alert("Fout bij resetten van product status")}catch(e){alert("Fout bij resetten van product status")}},className:"bg-yellow-100 text-yellow-700 px-3 py-2 rounded-lg font-semibold shadow-sm hover:bg-yellow-200 transition-all flex items-center gap-2 whitespace-nowrap text-sm",title:"Reset naar pending en probeer opnieuw",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Opnieuw proberen"]}),(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),window.location.href=`/products/${e.id}/edit`},className:"bg-gray-100 text-gray-700 px-4 py-2.5 rounded-lg font-semibold shadow-sm hover:bg-gray-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Bewerken"]})]})]})},e.id))})}},59547:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(10326),a=r(17577),i=r(47096),n=r(7394);function o({products:e}){let[t,r]=(0,a.useState)(e),[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),u=async()=>{let e=t.filter(e=>e.status?.toLowerCase()==="failed"||e.status?.toLowerCase()==="mislukt").length;if(0===e){alert("Geen mislukte producten gevonden");return}if(confirm(`Weet je zeker dat je alle ${e} mislukte product(en) wilt resetten naar pending?`)){c(!0);try{let e=await fetch("/api/products/reset-all-failed",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();alert(`✅ ${t.message}`),window.location.reload()}else{let t=await e.json();alert(`❌ Fout: ${t.error||"Onbekende fout"}`)}}catch(e){alert(`❌ Fout: ${e.message}`)}finally{c(!1)}}},p=t.filter(e=>"failed"===e.status).length;return(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("section",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-5 cursor-pointer hover:from-indigo-600 hover:to-purple-700 transition-all",onClick:()=>l(!o),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:s.jsx("svg",{className:`w-5 h-5 text-white transition-transform ${o?"rotate-45":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Nieuw product toevoegen"}),s.jsx("p",{className:"text-sm text-white/90 mt-0.5",children:"Vul de velden in en upload foto's voor je product."})]})]}),s.jsx("svg",{className:`w-6 h-6 text-white transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),o&&s.jsx("div",{className:"p-8",children:s.jsx(i.Z,{onSuccess:e=>{r([{id:e.id,title:e.title,description:e.description,price:e.price,articleNumber:e.articleNumber,status:e.status||"pending",marktplaatsUrl:e.marktplaatsUrl||null,marktplaatsAdId:e.marktplaatsAdId||null,views:e.views??0,saves:e.saves??0,postedAt:e.postedAt||null,createdAt:e.createdAt||new Date},...t]),l(!1)}})})]}),(0,s.jsxs)("section",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-5 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Bestaande producten"}),s.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Gebruik run_marktplaats.bat om alle pending producten te plaatsen."})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[p>0&&s.jsx("button",{onClick:u,disabled:d,className:"bg-yellow-500 text-white px-4 py-2 rounded-lg font-semibold shadow-sm hover:bg-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:`Reset alle ${p} mislukte product(en) naar pending`,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetten..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset ",p," mislukt",1!==p?"e":""]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:t.length}),s.jsx("span",{className:"text-sm text-gray-500",children:"items"})]})]})]})}),s.jsx("div",{className:"p-6",children:s.jsx(n.Z,{products:t})})]})]})}},55525:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(19510),a=r(58585),i=r(90455),n=r(72331),o=r(58301);let l=(0,r(68570).createProxy)(String.raw`/Users/gebruiker/Desktop/marktplaats/components/ProductsClient.tsx#default`);async function d(){let e=await (0,i.Z)();e&&e.user||(0,a.redirect)("/login");let t=(await n._.product.findMany({where:{userId:e.user.id},orderBy:{createdAt:"desc"},include:{category:!0}})).map(e=>({...e,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString(),postedAt:e.postedAt?e.postedAt.toISOString():null}));return(0,s.jsxs)(o.Z,{user:{email:e.user.email||"",name:e.user.name},children:[s.jsx("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Producten"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Beheer hier al je producten en verstuur ze met \xe9\xe9n klik naar Marktplaats."})]})]})}),s.jsx(l,{products:t})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,892,461,934,833,12,96],()=>r(53980));module.exports=s})();