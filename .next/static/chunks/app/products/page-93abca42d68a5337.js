(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{1191:function(e,t,s){Promise.resolve().then(s.bind(s,4711)),Promise.resolve().then(s.bind(s,7229))},4005:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(7437),a=s(2265);function n(e){let{products:t}=e,[s,n]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{let e={};for(let r of t)try{var s;let t=await fetch("/api/products/".concat(r.id,"/image"));if(t.ok&&(null===(s=t.headers.get("content-type"))||void 0===s?void 0:s.startsWith("image/"))){let s=await t.blob();e[r.id]=URL.createObjectURL(s)}else if(t.ok){let s=await t.json();e[r.id]=s.image}}catch(t){console.error("Error loading image for product ".concat(r.id,":"),t),e[r.id]=null}return n(e),()=>{Object.values(e).forEach(e=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)})}})()},[t]);let o=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},i=e=>{switch(e){case"completed":return"Geplaatst";case"processing":return"Bezig...";case"failed":return"Mislukt";default:return"Wachtend"}};return 0===t.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"Nog geen producten toegevoegd"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Voeg je eerste product toe om te beginnen"})]}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all p-6 cursor-pointer",onClick:()=>window.location.href="/products/".concat(e.id,"/edit"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[s[e.id]?(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-24 h-24 rounded-lg overflow-hidden border border-gray-200 bg-gray-100",children:(0,r.jsx)("img",{src:s[e.id],alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})})}):(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-24 h-24 rounded-lg border border-gray-200 bg-gray-100 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex items-start gap-3 mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 hover:text-indigo-600 transition-colors",children:e.title}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat(o(e.status)),children:i(e.status)})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]})}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,r.jsxs)("span",{className:"font-medium",children:["#",e.articleNumber]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("span",{className:"font-bold text-indigo-600",children:["€",e.price.toFixed(2)]})]}),e.marktplaatsUrl&&(0,r.jsxs)("a",{href:e.marktplaatsUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm font-medium text-indigo-600 hover:text-indigo-700 transition-colors",children:[(0,r.jsx)("span",{children:"Bekijk op Marktplaats"}),(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),(0,r.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2",children:["failed"===e.status&&(0,r.jsxs)("button",{onClick:async t=>{if(t.stopPropagation(),confirm("Weet je zeker dat je dit product opnieuw wilt proberen te plaatsen?"))try{(await fetch("/api/products/reset-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:[e.id]})})).ok?window.location.reload():alert("Fout bij resetten van product status")}catch(e){alert("Fout bij resetten van product status")}},className:"bg-yellow-100 text-yellow-700 px-3 py-2 rounded-lg font-semibold shadow-sm hover:bg-yellow-200 transition-all flex items-center gap-2 whitespace-nowrap text-sm",title:"Reset naar pending en probeer opnieuw",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Opnieuw proberen"]}),(0,r.jsxs)("button",{onClick:t=>{t.stopPropagation(),window.location.href="/products/".concat(e.id,"/edit")},className:"bg-gray-100 text-gray-700 px-4 py-2.5 rounded-lg font-semibold shadow-sm hover:bg-gray-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Bewerken"]})]})]})},e.id))})}},4711:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var r=s(7437),a=s(2265),n=s(9976),o=s(4005);function i(e){let{products:t}=e,[s,i]=(0,a.useState)(t),[l,d]=(0,a.useState)(!1),[c,h]=(0,a.useState)(!1),m=async()=>{let e=s.filter(e=>{var t,s;return(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())==="failed"||(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())==="mislukt"}).length;if(0===e){alert("Geen mislukte producten gevonden");return}if(confirm("Weet je zeker dat je alle ".concat(e," mislukte product(en) wilt resetten naar pending?"))){h(!0);try{let e=await fetch("/api/products/reset-all-failed",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();alert("✅ ".concat(t.message)),window.location.reload()}else{let t=await e.json();alert("❌ Fout: ".concat(t.error||"Onbekende fout"))}}catch(e){alert("❌ Fout: ".concat(e.message))}finally{h(!1)}}},x=s.filter(e=>"failed"===e.status).length;return(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-5 cursor-pointer hover:from-indigo-600 hover:to-purple-700 transition-all",onClick:()=>d(!l),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white transition-transform ".concat(l?"rotate-45":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:"Nieuw product toevoegen"}),(0,r.jsx)("p",{className:"text-sm text-white/90 mt-0.5",children:"Vul de velden in en upload foto's voor je product."})]})]}),(0,r.jsx)("svg",{className:"w-6 h-6 text-white transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l&&(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(n.Z,{onSuccess:e=>{var t,r;i([{id:e.id,title:e.title,description:e.description,price:e.price,articleNumber:e.articleNumber,status:e.status||"pending",marktplaatsUrl:e.marktplaatsUrl||null,marktplaatsAdId:e.marktplaatsAdId||null,views:null!==(t=e.views)&&void 0!==t?t:0,saves:null!==(r=e.saves)&&void 0!==r?r:0,postedAt:e.postedAt||null,createdAt:e.createdAt||new Date},...s]),d(!1)}})})]}),(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-5 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Bestaande producten"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:"Gebruik run_marktplaats.bat om alle pending producten te plaatsen."})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[x>0&&(0,r.jsx)("button",{onClick:m,disabled:c,className:"bg-yellow-500 text-white px-4 py-2 rounded-lg font-semibold shadow-sm hover:bg-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Reset alle ".concat(x," mislukte product(en) naar pending"),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetten..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset ",x," mislukt",1!==x?"e":""]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:s.length}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"items"})]})]})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(o.Z,{products:s})})]})]})}}},function(e){e.O(0,[51,648,177,971,117,744],function(){return e(e.s=1191)}),_N_E=e.O()}]);