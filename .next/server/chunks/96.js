"use strict";exports.id=96,exports.ids=[96],exports.modules={47096:(e,r,t)=>{t.d(r,{Z:()=>o});var s=t(10326),l=t(17577);function o({product:e,onSuccess:r,mode:t="create"}){let[o,a]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)([]),[g,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[b,f]=(0,l.useState)([]),[j,y]=(0,l.useState)([]),[v,N]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[C,S]=(0,l.useState)({title:e?.title||"",description:e?.description||"",price:e?.price?.toString()||"",articleNumber:e?.articleNumber||"",condition:e?.condition||"Gebruikt",material:e?.material||"",thickness:e?.thickness||"",totalSurface:e?.totalSurface||"",deliveryOption:e?.deliveryOption||"Ophalen of Verzenden",location:e?.location||"",categoryId:e?.categoryId||""}),L=c.filter(e=>1===e.level),B=g&&c.find(e=>e.id===g)?.children||[],O=u&&c.find(e=>e.id===u)?.children||[],P=e=>{m(e),h(""),p("")},M=e=>{h(e),p("")},T=e=>{let r=b.filter((r,t)=>t!==e),t=j.filter((r,t)=>t!==e);URL.revokeObjectURL(j[e]),f(r),y(t)},z=e=>{N(r=>r.filter(r=>r!==e)),k(r=>[...r,e])},F=async s=>{s.preventDefault(),a(!0);try{if(b.length>0&&C.articleNumber){n(!0);let e=new FormData;if(b.forEach(r=>{e.append("files",r)}),e.append("articleNumber",C.articleNumber),!(await fetch("/api/products/upload",{method:"POST",body:e})).ok)throw Error("Fout bij uploaden van foto's");n(!1)}if("edit"===t&&w.length>0)for(let e of w)try{let r=e.split("/"),t=r[r.length-1],s=r[r.length-2];await fetch("/api/products/delete-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imagePath:e,articleNumber:s,filename:t})})}catch(e){console.error("Error deleting image:",e)}let s="edit"===t&&e?`/api/products/${e.id}`:"/api/products",l=await fetch(s,{method:"edit"===t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,price:parseFloat(C.price)})});if(!l.ok)throw Error("Fout bij opslaan");let o=await l.json();r?.(o),"create"===t&&(S({title:"",description:"",price:"",articleNumber:"",condition:"Gebruikt",material:"",thickness:"",totalSurface:"",deliveryOption:"Ophalen of Verzenden",location:"",categoryId:""}),m(""),h(""),p(""),f([]),j.forEach(e=>URL.revokeObjectURL(e)),y([]))}catch(e){alert("Er is een fout opgetreden")}finally{a(!1),n(!1)}};return(0,s.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Titel"}),s.jsx("input",{type:"text",required:!0,className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.title,onChange:e=>S({...C,title:e.target.value}),placeholder:"Voer producttitel in"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Artikelnummer"}),s.jsx("input",{type:"text",required:!0,className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.articleNumber,onChange:e=>S({...C,articleNumber:e.target.value}),placeholder:"Bijv. ART-001"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Categorie"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-2.5 uppercase tracking-wide",children:"Hoofdcategorie"}),(0,s.jsxs)("select",{className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all cursor-pointer",value:g,onChange:e=>P(e.target.value),style:{color:"#111827"},children:[s.jsx("option",{value:"",style:{color:"#6b7280"},children:"Selecteer..."}),L.map(e=>s.jsx("option",{value:e.id,style:{color:"#111827"},children:e.name},e.id))]})]}),g&&B.length>0&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-2.5 uppercase tracking-wide",children:"Subcategorie"}),(0,s.jsxs)("select",{className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all cursor-pointer",value:u,onChange:e=>M(e.target.value),style:{color:"#111827"},children:[s.jsx("option",{value:"",style:{color:"#6b7280"},children:"Selecteer..."}),B.map(e=>s.jsx("option",{value:e.id,style:{color:"#111827"},children:e.name},e.id))]})]}),u&&O.length>0&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-2.5 uppercase tracking-wide",children:"Sub-subcategorie"}),(0,s.jsxs)("select",{className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white text-sm text-gray-900 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all cursor-pointer",value:x,onChange:e=>p(e.target.value),style:{color:"#111827"},children:[s.jsx("option",{value:"",style:{color:"#6b7280"},children:"Selecteer..."}),O.map(e=>s.jsx("option",{value:e.id,style:{color:"#111827"},children:e.name},e.id))]})]})]})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Beschrijving"}),s.jsx("textarea",{required:!0,rows:4,className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all resize-none placeholder:text-gray-400",value:C.description,onChange:e=>S({...C,description:e.target.value}),placeholder:"Beschrijf je product..."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Prijs (â‚¬)"}),s.jsx("input",{type:"number",step:"0.01",required:!0,className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.price,onChange:e=>S({...C,price:e.target.value}),placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Staat"}),(0,s.jsxs)("select",{className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all cursor-pointer",value:C.condition,onChange:e=>S({...C,condition:e.target.value}),children:[s.jsx("option",{children:"Nieuw"}),s.jsx("option",{children:"Zo goed als nieuw"}),s.jsx("option",{children:"Gebruikt"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Materiaal"}),s.jsx("input",{type:"text",className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.material,onChange:e=>S({...C,material:e.target.value}),placeholder:"Bijv. Hardschuim (Pir)"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Dikte"}),s.jsx("input",{type:"text",className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.thickness,onChange:e=>S({...C,thickness:e.target.value}),placeholder:"Bijv. 4 tot 8 cm"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Oppervlakte"}),s.jsx("input",{type:"text",className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.totalSurface,onChange:e=>S({...C,totalSurface:e.target.value}),placeholder:"Bijv. 5 tot 10 m\xb2"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2.5",children:"Locatie"}),s.jsx("input",{type:"text",className:"block w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-gray-900 transition-all placeholder:text-gray-400",value:C.location,onChange:e=>S({...C,location:e.target.value}),placeholder:"Bijv. Amsterdam"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Foto's"}),(0,s.jsxs)("div",{className:"mt-1",children:[s.jsx("div",{className:"flex items-center justify-center w-full",children:(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-semibold",children:"Klik om te uploaden"})," of sleep bestanden hierheen"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, HEIC (MAX. 10MB per bestand)"})]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/heic",onChange:e=>{let r=Array.from(e.target.files||[]);f(r),y(r.map(e=>URL.createObjectURL(e)))},className:"hidden"})]})}),b.length>0&&(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-indigo-600",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("span",{className:"font-medium",children:[b.length," bestand(en) geselecteerd"]})]})]}),v.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bestaande foto's:"}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:v.map((e,r)=>(0,s.jsxs)("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200 shadow-sm hover:border-indigo-300 transition-colors",children:s.jsx("img",{src:e,alt:`Bestaande foto ${r+1}`,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}),s.jsx("button",{type:"button",onClick:()=>z(e),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm shadow-lg hover:bg-red-600 transition-colors",children:"\xd7"})]},`existing-${r}`))})]}),j.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[v.length>0&&s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Nieuwe foto's:"}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:j.map((e,r)=>(0,s.jsxs)("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200 shadow-sm hover:border-indigo-300 transition-colors",children:s.jsx("img",{src:e,alt:`Preview ${r+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>T(r),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-7 h-7 flex items-center justify-center text-sm shadow-lg hover:bg-red-600 transition-colors",children:"\xd7"})]},`preview-${r}`))})]}),!C.articleNumber&&b.length>0&&(0,s.jsxs)("div",{className:"mt-3 flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsx("svg",{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"text-sm text-amber-800",children:"Voer eerst een artikelnummer in voordat je foto's uploadt"})]})]})]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsx("button",{type:"submit",disabled:o||i||b.length>0&&!C.articleNumber,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold shadow-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Foto's uploaden..."]}):o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Opslaan..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"edit"===t?"Product Bijwerken":"Product Toevoegen"]})})})]})}}};